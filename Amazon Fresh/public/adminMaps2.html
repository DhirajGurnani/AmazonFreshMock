<!DOCTYPE html>
<html>
<head>
<script
src="http://maps.googleapis.com/maps/api/js">
</script>

<script>
//   /api/admin/trips/getBills
var routes = [{"start_location": {
                "lat": 37.333305,
                "lng": -121.9134345
              }, "end_location": {
                "lat": 37.3323574,
                "lng": -121.9122916
              }},{"start_location": {
                "lat": 37.3323574,
                "lng": -121.9122916
              },"end_location": {
                "lat": 37.3364937,
                "lng": -121.898496
              }},{"start_location": {
                "lat": 37.3364937,
                "lng": -121.898496
              },"end_location": {
                "lat": 37.3334978,
                "lng": -121.8971152
              }},{"start_location": {
                "lat": 37.3334978,
                "lng": -121.8971152
              }, "end_location": {
                "lat": 37.3285631,
                "lng": -121.8955404
              }},{"start_location": {
                "lat": 37.3285631,
                "lng": -121.8955404
              }, "end_location": {
                "lat": 37.3247312,
                "lng": -121.8870632
              }},{"start_location": {
                "lat": 37.3247312,
                "lng": -121.8870632
              }, "end_location": {
                "lat": 37.3268266,
                "lng": -121.8813867
              }},{"start_location": {
                "lat": 37.3268266,
                "lng": -121.8813867
              }, "end_location": {
                "lat": 37.3263269,
                "lng": -121.8767688
              }},{"start_location": {
                "lat": 37.3263269,
                "lng": -121.8767688
              }, "end_location": {
                "lat": 37.3229926,
                "lng": -121.8832
              }}];
var myCenter = new google.maps.LatLng(routes[routes.length / 2].end_location.lat, routes[routes.length / 2].end_location.lng);
var index = 0;
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
	directionsDisplay = new google.maps.DirectionsRenderer();
    var mapProp = {
        center: myCenter,
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
    var markers = [];

    var intervalID = setInterval(function() {
    	if(markers.length !== 0) {
        	//markers[0].setMap(null);
            //markers.pop();	
    	}
        if (index === routes.length-1) {
        	console.log("done with traversal;")
            clearInterval(intervalID);
        }
        myCenter = new google.maps.LatLng(routes[index].end_location.lat, routes[index].end_location.lng);
        index++;
        console.log("hello");
        var marker = new google.maps.Marker({
            position: myCenter,
            animation:google.maps.Animation.BOUNCE,
            map: map
        });
        markers.push(marker);
        //marker.setMap(map);
    }, 2007);
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body>
<div id="googleMap" style="width:1800px;height:1000px;"></div>
</body>
</html>
